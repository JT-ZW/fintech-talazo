<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Settings - Talazo AgriFinance</title>

    <!-- External Libraries -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/toastify-js@1.12.0/src/toastify.min.js"></script>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/toastify-js@1.12.0/src/toastify.min.css"
    />

    <style>
      /* Talazo AgriFinance - Settings Page Styling */

      :root {
        /* Color Palette - Professional Financial Institution */
        --primary-color: #2d7d32; /* Forest Green */
        --primary-light: #4caf50; /* Light Green */
        --primary-dark: #1b5e20; /* Dark Green */
        --secondary-color: #ff8f00; /* Amber */
        --secondary-light: #ffb74d; /* Light Amber */
        --accent-color: #795548; /* Brown */
        --accent-light: #a1887f; /* Light Brown */

        /* Neutral Colors */
        --white: #ffffff;
        --off-white: #fafafa;
        --light-gray: #f5f5f5;
        --gray: #9e9e9e;
        --dark-gray: #424242;
        --charcoal: #212121;

        /* Financial Status Colors */
        --success: #4caf50;
        --warning: #ff9800;
        --error: #f44336;
        --info: #2196f3;
        --excellent: #0d7377;
        --good: #14a085;
        --fair: #f39c12;
        --poor: #e74c3c;

        /* Typography */
        --font-primary: "Inter", sans-serif;
        --font-display: "Playfair Display", serif;

        /* Spacing */
        --spacing-xs: 0.5rem;
        --spacing-sm: 1rem;
        --spacing-md: 1.5rem;
        --spacing-lg: 2rem;
        --spacing-xl: 3rem;
        --spacing-xxl: 4rem;

        /* Border Radius */
        --radius-sm: 6px;
        --radius-md: 10px;
        --radius-lg: 16px;
        --radius-xl: 24px;

        /* Shadows */
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
        --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.12);
        --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.15);
        --shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.2);

        /* Transitions */
        --transition-fast: 0.2s ease;
        --transition-normal: 0.3s ease;
        --transition-slow: 0.5s ease;
      }

      /* Reset and Base Styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: var(--font-primary);
        background: linear-gradient(
          135deg,
          #f8fffe 0%,
          #e8f5e8 50%,
          #f0f8f0 100%
        );
        color: var(--charcoal);
        line-height: 1.6;
        min-height: 100vh;
        padding-left: 280px; /* Account for sidebar */
        transition: padding-left var(--transition-normal);
        overflow-x: hidden;
      }

      body.sidebar-collapsed {
        padding-left: 80px;
      }

      body.mobile {
        padding-left: 0;
      }

      /* Sidebar Styles */
      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 280px;
        height: 100vh;
        background: linear-gradient(180deg, var(--charcoal) 0%, #1a1a1a 100%);
        color: var(--white);
        z-index: 1000;
        display: flex;
        flex-direction: column;
        transition: var(--transition-normal);
        box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

      .sidebar.collapsed {
        width: 80px;
      }

      .sidebar-header {
        padding: var(--spacing-lg);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        display: flex;
        align-items: center;
        justify-content: space-between;
        min-height: 70px;
      }

      .sidebar-logo {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        transition: var(--transition-normal);
      }

      .sidebar-logo .logo-icon {
        width: 40px;
        height: 40px;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--primary-light)
        );
        border-radius: var(--radius-lg);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--white);
        font-size: 1.25rem;
        box-shadow: var(--shadow-md);
        flex-shrink: 0;
      }

      .logo-text {
        font-family: var(--font-display);
        font-size: 1.25rem;
        font-weight: 600;
        white-space: nowrap;
        opacity: 1;
        transition: var(--transition-normal);
      }

      .sidebar.collapsed .logo-text {
        opacity: 0;
        width: 0;
      }

      .sidebar-toggle {
        background: none;
        border: none;
        color: var(--white);
        font-size: 1.25rem;
        cursor: pointer;
        padding: var(--spacing-sm);
        border-radius: var(--radius-md);
        transition: var(--transition-fast);
        opacity: 1;
      }

      .sidebar-toggle:hover {
        background: rgba(255, 255, 255, 0.1);
      }

      .sidebar.collapsed .sidebar-toggle {
        opacity: 0;
        pointer-events: none;
      }

      .sidebar-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow-y: auto;
        overflow-x: hidden;
      }

      .user-profile {
        padding: var(--spacing-lg);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        transition: var(--transition-normal);
      }

      .profile-avatar {
        font-size: 2.5rem;
        color: var(--primary-light);
        flex-shrink: 0;
      }

      .profile-info {
        opacity: 1;
        transition: var(--transition-normal);
      }

      .sidebar.collapsed .profile-info {
        opacity: 0;
        width: 0;
      }

      .profile-name {
        font-weight: 600;
        font-size: 1rem;
        color: var(--white);
        margin-bottom: var(--spacing-xs);
      }

      .profile-role {
        font-size: 0.875rem;
        color: rgba(255, 255, 255, 0.7);
      }

      .nav-menu {
        list-style: none;
        padding: var(--spacing-lg) 0;
        margin: 0;
        flex: 1;
      }

      .nav-item {
        margin-bottom: var(--spacing-xs);
        position: relative;
      }

      .nav-item.active .nav-link {
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--primary-light)
        );
        color: var(--white);
        box-shadow: var(--shadow-md);
      }

      .nav-item.active .nav-indicator {
        opacity: 1;
        transform: scaleY(1);
      }

      .nav-link {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        padding: var(--spacing-md) var(--spacing-lg);
        color: rgba(255, 255, 255, 0.8);
        text-decoration: none;
        transition: var(--transition-fast);
        border-radius: 0 25px 25px 0;
        margin-right: var(--spacing-md);
        position: relative;
        overflow: hidden;
      }

      .nav-link:hover {
        background: rgba(255, 255, 255, 0.1);
        color: var(--white);
        transform: translateX(5px);
      }

      .nav-link i {
        font-size: 1.25rem;
        width: 24px;
        text-align: center;
        flex-shrink: 0;
      }

      .nav-text {
        font-weight: 500;
        white-space: nowrap;
        opacity: 1;
        transition: var(--transition-normal);
      }

      .sidebar.collapsed .nav-text {
        opacity: 0;
        width: 0;
      }

      .nav-badge {
        background: var(--primary-color);
        color: var(--white);
        font-size: 0.75rem;
        padding: 2px 6px;
        border-radius: var(--radius-sm);
        min-width: 20px;
        text-align: center;
        margin-left: auto;
        opacity: 1;
        transition: var(--transition-normal);
      }

      .sidebar.collapsed .nav-badge {
        opacity: 0;
        width: 0;
      }

      .nav-notification {
        width: 8px;
        height: 8px;
        background: var(--error);
        border-radius: 50%;
        margin-left: auto;
        opacity: 1;
        transition: var(--transition-normal);
      }

      .sidebar.collapsed .nav-notification {
        opacity: 0;
        width: 0;
      }

      .nav-indicator {
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%) scaleY(0);
        width: 4px;
        height: 100%;
        background: var(--primary-light);
        border-radius: 0 2px 2px 0;
        transition: var(--transition-fast);
        opacity: 0;
      }

      .nav-divider {
        height: 1px;
        background: rgba(255, 255, 255, 0.1);
        margin: var(--spacing-md) var(--spacing-lg);
      }

      .nav-section {
        padding: var(--spacing-md) var(--spacing-lg) var(--spacing-sm);
      }

      .nav-section-title {
        font-size: 0.75rem;
        color: rgba(255, 255, 255, 0.5);
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: 600;
        opacity: 1;
        transition: var(--transition-normal);
      }

      .sidebar.collapsed .nav-section-title {
        opacity: 0;
      }

      .sidebar-footer {
        padding: var(--spacing-lg);
        border-top: 1px solid rgba(255, 255, 255, 0.1);
      }

      .quick-actions {
        display: flex;
        gap: var(--spacing-sm);
        margin-bottom: var(--spacing-md);
        justify-content: space-between;
      }

      .quick-action {
        background: rgba(255, 255, 255, 0.1);
        border: none;
        color: var(--white);
        width: 40px;
        height: 40px;
        border-radius: var(--radius-md);
        cursor: pointer;
        transition: var(--transition-fast);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .quick-action:hover {
        background: var(--primary-color);
        transform: translateY(-2px);
      }

      .logout-btn {
        width: 100%;
        background: none;
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: rgba(255, 255, 255, 0.8);
        padding: var(--spacing-md);
        border-radius: var(--radius-md);
        cursor: pointer;
        transition: var(--transition-fast);
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        justify-content: center;
      }

      .logout-btn:hover {
        background: rgba(244, 67, 54, 0.2);
        border-color: var(--error);
        color: var(--white);
      }

      .sidebar.collapsed .logout-btn .nav-text {
        opacity: 0;
        width: 0;
      }

      /* Mobile Overlay */
      .sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        opacity: 0;
        visibility: hidden;
        transition: var(--transition-normal);
      }

      .sidebar-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      /* Header */
      .header {
        background: var(--white);
        box-shadow: var(--shadow-sm);
        border-bottom: 1px solid rgba(45, 125, 50, 0.1);
        position: sticky;
        top: 0;
        z-index: 900;
        transition: var(--transition-normal);
      }

      .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--spacing-md) var(--spacing-xl);
        gap: var(--spacing-lg);
      }

      .header-left {
        display: flex;
        align-items: center;
        gap: var(--spacing-lg);
      }

      .mobile-menu-toggle {
        display: none;
        background: none;
        border: none;
        font-size: 1.25rem;
        color: var(--charcoal);
        cursor: pointer;
        padding: var(--spacing-sm);
        border-radius: var(--radius-md);
        transition: var(--transition-fast);
      }

      .mobile-menu-toggle:hover {
        background: var(--light-gray);
      }

      .breadcrumb {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
        color: var(--gray);
        font-size: 0.875rem;
        font-weight: 500;
      }

      .breadcrumb i {
        color: var(--primary-color);
      }

      .breadcrumb .fas.fa-chevron-right {
        font-size: 0.75rem;
        color: var(--gray);
      }

      .back-link {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
        color: var(--primary-color);
        text-decoration: none;
        font-weight: 500;
        padding: var(--spacing-sm) var(--spacing-md);
        border-radius: var(--radius-md);
        transition: var(--transition-fast);
      }

      .back-link:hover {
        background: rgba(45, 125, 50, 0.1);
      }

      .page-title {
        font-family: var(--font-display);
        font-size: 2rem;
        font-weight: 600;
        color: var(--charcoal);
        margin: 0;
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
      }

      .page-title i {
        color: var(--primary-color);
      }

      .page-subtitle {
        color: var(--gray);
        font-size: 1rem;
        margin: var(--spacing-sm) 0 0 0;
      }

      /* Container */
      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: var(--spacing-lg);
      }

      /* Page Header */
      .page-header {
        background: var(--white);
        border-radius: var(--radius-xl);
        padding: var(--spacing-xl);
        margin-bottom: var(--spacing-xl);
        box-shadow: var(--shadow-md);
        border: 1px solid rgba(45, 125, 50, 0.1);
        position: relative;
        overflow: hidden;
      }

      .page-header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--primary-light)
        );
      }

      /* Settings Grid */
      .settings-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        gap: var(--spacing-xl);
        margin-bottom: var(--spacing-xl);
      }

      /* Settings Section */
      .settings-section {
        background: var(--white);
        border-radius: var(--radius-xl);
        padding: var(--spacing-xl);
        box-shadow: var(--shadow-md);
        border: 1px solid rgba(45, 125, 50, 0.1);
        transition: var(--transition-normal);
        position: relative;
        overflow: hidden;
      }

      .settings-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--primary-light)
        );
      }

      .settings-section:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      .section-title {
        font-family: var(--font-display);
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--charcoal);
        margin: 0 0 var(--spacing-lg) 0;
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
      }

      .section-title i {
        color: var(--primary-color);
      }

      /* Form Elements */
      .form-group {
        margin-bottom: var(--spacing-lg);
      }

      .form-group label {
        display: block;
        margin-bottom: var(--spacing-sm);
        font-weight: 600;
        color: var(--charcoal);
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .form-group input,
      .form-group select {
        width: 100%;
        padding: var(--spacing-md);
        border: 2px solid rgba(45, 125, 50, 0.2);
        border-radius: var(--radius-md);
        font-size: 1rem;
        font-family: var(--font-primary);
        transition: var(--transition-fast);
        background: var(--white);
        color: var(--charcoal);
      }

      .form-group input:focus,
      .form-group select:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(45, 125, 50, 0.1);
      }

      /* Toggle Elements */
      .toggle-group {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-md);
      }

      .toggle-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--spacing-md);
        background: linear-gradient(
          135deg,
          var(--light-gray) 0%,
          var(--white) 100%
        );
        border-radius: var(--radius-lg);
        border: 1px solid rgba(45, 125, 50, 0.1);
        transition: var(--transition-normal);
      }

      .toggle-item:hover {
        background: linear-gradient(
          135deg,
          rgba(45, 125, 50, 0.05) 0%,
          var(--white) 100%
        );
      }

      .toggle-item span {
        font-weight: 500;
        color: var(--charcoal);
      }

      /* Custom Toggle Switch */
      .toggle {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 34px;
      }

      .toggle input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: var(--gray);
        transition: 0.4s;
        border-radius: 34px;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .slider:before {
        position: absolute;
        content: "";
        height: 26px;
        width: 26px;
        left: 4px;
        bottom: 4px;
        background-color: var(--white);
        transition: 0.4s;
        border-radius: 50%;
        box-shadow: var(--shadow-sm);
      }

      input:checked + .slider {
        background-color: var(--primary-color);
      }

      input:checked + .slider:before {
        transform: translateX(26px);
      }

      .slider:hover {
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      /* Buttons */
      .btn {
        padding: var(--spacing-md) var(--spacing-lg);
        border: none;
        border-radius: var(--radius-md);
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition-fast);
        display: inline-flex;
        align-items: center;
        gap: var(--spacing-sm);
        text-decoration: none;
        font-family: var(--font-primary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .btn-primary {
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--primary-light)
        );
        color: var(--white);
        box-shadow: var(--shadow-sm);
      }

      .btn-primary:hover {
        background: linear-gradient(
          135deg,
          var(--primary-dark),
          var(--primary-color)
        );
        box-shadow: var(--shadow-md);
        transform: translateY(-1px);
      }

      .btn-secondary {
        background: var(--gray);
        color: var(--white);
        box-shadow: var(--shadow-sm);
      }

      .btn-secondary:hover {
        background: var(--dark-gray);
        box-shadow: var(--shadow-md);
        transform: translateY(-1px);
      }

      .btn-outline {
        background: transparent;
        color: var(--charcoal);
        border: 2px solid rgba(45, 125, 50, 0.3);
        box-shadow: none;
      }

      .btn-outline:hover {
        background: rgba(45, 125, 50, 0.1);
        border-color: var(--primary-color);
      }

      .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .button-group {
        display: flex;
        gap: var(--spacing-md);
        flex-wrap: wrap;
      }

      /* Info Box */
      .info-box {
        background: linear-gradient(
          135deg,
          rgba(33, 150, 243, 0.1) 0%,
          rgba(33, 150, 243, 0.05) 100%
        );
        padding: var(--spacing-lg);
        border-radius: var(--radius-lg);
        display: flex;
        align-items: flex-start;
        gap: var(--spacing-md);
        margin-bottom: var(--spacing-lg);
        border: 1px solid rgba(33, 150, 243, 0.2);
      }

      .info-box i {
        color: var(--info);
        font-size: 1.25rem;
        margin-top: 2px;
      }

      .info-box p {
        margin: 0;
        color: var(--charcoal);
        line-height: 1.6;
      }

      /* System Info */
      .system-info {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-md);
      }

      .info-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--spacing-md);
        background: linear-gradient(
          135deg,
          var(--light-gray) 0%,
          var(--white) 100%
        );
        border-radius: var(--radius-lg);
        border: 1px solid rgba(45, 125, 50, 0.1);
        transition: var(--transition-normal);
      }

      .info-item:hover {
        background: linear-gradient(
          135deg,
          rgba(45, 125, 50, 0.05) 0%,
          var(--white) 100%
        );
      }

      .label {
        font-weight: 600;
        color: var(--gray);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-size: 0.875rem;
      }

      .value {
        font-weight: 600;
        color: var(--charcoal);
      }

      .status-online {
        color: var(--success);
        display: flex;
        align-items: center;
        gap: var(--spacing-xs);
      }

      .status-online::before {
        content: "";
        width: 8px;
        height: 8px;
        background: var(--success);
        border-radius: 50%;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      /* Success Message */
      .success-message {
        background: linear-gradient(
          135deg,
          rgba(76, 175, 80, 0.1) 0%,
          rgba(76, 175, 80, 0.05) 100%
        );
        border: 1px solid rgba(76, 175, 80, 0.2);
        color: var(--success);
        padding: var(--spacing-md);
        border-radius: var(--radius-lg);
        margin-bottom: var(--spacing-md);
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
        opacity: 0;
        transform: translateY(-10px);
        transition: var(--transition-normal);
      }

      .success-message.show {
        opacity: 1;
        transform: translateY(0);
      }

      /* Responsive Design */
      @media (max-width: 1200px) {
        .settings-grid {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 768px) {
        body {
          padding-left: 0;
        }

        body.mobile {
          padding-left: 0;
        }

        .sidebar {
          transform: translateX(-100%);
        }

        .sidebar.mobile-open {
          transform: translateX(0);
        }

        .mobile-menu-toggle {
          display: block;
        }

        .breadcrumb {
          display: none;
        }

        .container {
          padding: var(--spacing-md);
        }

        .settings-grid {
          grid-template-columns: 1fr;
          gap: var(--spacing-lg);
        }

        .header-content {
          padding: var(--spacing-md);
        }

        .button-group {
          flex-direction: column;
        }

        .btn {
          justify-content: center;
        }

        .page-title {
          font-size: 1.5rem;
        }
      }

      @media (max-width: 480px) {
        .sidebar {
          width: 100%;
        }

        .quick-actions {
          flex-direction: column;
          gap: var(--spacing-xs);
        }

        .quick-action {
          width: 100%;
        }

        .settings-grid {
          grid-template-columns: 1fr;
        }
      }

      /* Animations */
      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .slide-in-up {
        animation: slideInUp 0.6s ease-out forwards;
      }

      .fade-in {
        animation: fadeIn 0.5s ease-out forwards;
      }

      /* Stagger animations for settings sections */
      .settings-section:nth-child(1) {
        animation-delay: 0.1s;
      }
      .settings-section:nth-child(2) {
        animation-delay: 0.2s;
      }
      .settings-section:nth-child(3) {
        animation-delay: 0.3s;
      }
      .settings-section:nth-child(4) {
        animation-delay: 0.4s;
      }
      .settings-section:nth-child(5) {
        animation-delay: 0.5s;
      }
      .settings-section:nth-child(6) {
        animation-delay: 0.6s;
      }
    </style>
  </head>

  <body>
    <!-- Sidebar Navigation -->
    <nav id="sidebar" class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <div class="logo-icon">
            <i class="fas fa-seedling"></i>
          </div>
          <span class="logo-text">Talazo AgriFinance</span>
        </div>
        <button id="sidebar-toggle" class="sidebar-toggle">
          <i class="fas fa-bars"></i>
        </button>
      </div>

      <div class="sidebar-content">
        <div class="user-profile">
          <div class="profile-avatar">
            <i class="fas fa-user-circle"></i>
          </div>
          <div class="profile-info">
            <div class="profile-name">Financial Officer</div>
            <div class="profile-role">AgriFinance Division</div>
          </div>
        </div>

        <ul class="nav-menu">
          <li class="nav-item">
            <a href="/dashboard" class="nav-link">
              <i class="fas fa-tachometer-alt"></i>
              <span class="nav-text">Dashboard</span>
              <div class="nav-indicator"></div>
            </a>
          </li>
          <li class="nav-item">
            <a href="/farmers" class="nav-link">
              <i class="fas fa-users"></i>
              <span class="nav-text">Farmers</span>
              <div class="nav-badge">156</div>
            </a>
          </li>
          <li class="nav-item">
            <a href="/loans" class="nav-link">
              <i class="fas fa-hand-holding-usd"></i>
              <span class="nav-text">Loans</span>
              <div class="nav-badge">23</div>
            </a>
          </li>
          <li class="nav-item">
            <a href="/insurance" class="nav-link">
              <i class="fas fa-shield-alt"></i>
              <span class="nav-text">Insurance</span>
              <div class="nav-badge">89</div>
            </a>
          </li>
          <li class="nav-item">
            <a href="/soil_analysis" class="nav-link">
              <i class="fas fa-vial"></i>
              <span class="nav-text">Soil Analysis</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="/ai_recommendations" class="nav-link">
              <i class="fas fa-brain"></i>
              <span class="nav-text">AI Recommendations</span>
              <div class="nav-notification"></div>
            </a>
          </li>

          <li class="nav-divider"></li>

          <li class="nav-section">
            <span class="nav-section-title">Analytics</span>
          </li>
          <li class="nav-item">
            <a href="/reports" class="nav-link">
              <i class="fas fa-chart-bar"></i>
              <span class="nav-text">Reports</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="/trends" class="nav-link">
              <i class="fas fa-chart-line"></i>
              <span class="nav-text">Market Trends</span>
            </a>
          </li>

          <li class="nav-divider"></li>

          <li class="nav-section">
            <span class="nav-section-title">System</span>
          </li>
          <li class="nav-item active">
            <a href="/settings" class="nav-link">
              <i class="fas fa-cog"></i>
              <span class="nav-text">Settings</span>
              <div class="nav-indicator"></div>
            </a>
          </li>
          <li class="nav-item">
            <a href="/help" class="nav-link">
              <i class="fas fa-question-circle"></i>
              <span class="nav-text">Help & Support</span>
            </a>
          </li>
        </ul>

        <div class="sidebar-footer">
          <div class="quick-actions">
            <button class="quick-action" title="Add New Farmer">
              <i class="fas fa-user-plus"></i>
            </button>
            <button class="quick-action" title="Quick Loan Assessment">
              <i class="fas fa-calculator"></i>
            </button>
            <button class="quick-action" title="Emergency Alert">
              <i class="fas fa-bell"></i>
            </button>
          </div>
          <button class="logout-btn">
            <i class="fas fa-sign-out-alt"></i>
            <span class="nav-text">Logout</span>
          </button>
        </div>
      </div>
    </nav>

    <!-- Mobile Overlay -->
    <div id="sidebar-overlay" class="sidebar-overlay"></div>

    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="header-left">
          <button id="mobile-menu-toggle" class="mobile-menu-toggle">
            <i class="fas fa-bars"></i>
          </button>
          <div class="breadcrumb">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
            <i class="fas fa-chevron-right"></i>
            <span>Configuration</span>
          </div>
        </div>
      </div>
    </header>

    <div class="container">
      <!-- Page Header -->
      <div class="page-header fade-in">
        <a href="/dashboard" class="back-link">
          <i class="fas fa-arrow-left"></i>
          Back to Dashboard
        </a>
        <h1 class="page-title">
          <i class="fas fa-cog"></i>
          Settings
        </h1>
        <p class="page-subtitle">
          Configure your Talazo AgriFinance platform preferences and account
          settings
        </p>
      </div>

      <!-- Settings Grid -->
      <div class="settings-grid">
        <!-- Profile Settings -->
        <div class="settings-section slide-in-up">
          <h3 class="section-title">
            <i class="fas fa-user"></i>
            Profile Settings
          </h3>
          <form class="settings-form">
            <div class="form-group">
              <label for="name">Full Name</label>
              <input type="text" id="name" value="Financial Officer" />
            </div>
            <div class="form-group">
              <label for="email">Email Address</label>
              <input type="email" id="email" value="officer@talazo.com" />
            </div>
            <div class="form-group">
              <label for="phone">Phone Number</label>
              <input type="tel" id="phone" value="+263 712 345 678" />
            </div>
            <div class="form-group">
              <label for="department">Department</label>
              <select id="department">
                <option value="finance">AgriFinance Division</option>
                <option value="risk">Risk Assessment</option>
                <option value="analytics">Data Analytics</option>
                <option value="operations">Operations</option>
              </select>
            </div>
            <button
              type="button"
              class="btn btn-primary"
              onclick="updateProfile()"
            >
              <i class="fas fa-save"></i>
              Update Profile
            </button>
          </form>
        </div>

        <!-- Notification Preferences -->
        <div class="settings-section slide-in-up">
          <h3 class="section-title">
            <i class="fas fa-bell"></i>
            Notification Preferences
          </h3>
          <div class="settings-form">
            <div class="toggle-group">
              <div class="toggle-item">
                <span>Email Notifications</span>
                <label class="toggle">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>
              <div class="toggle-item">
                <span>SMS Alerts</span>
                <label class="toggle">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>
              <div class="toggle-item">
                <span>Loan Application Alerts</span>
                <label class="toggle">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>
              <div class="toggle-item">
                <span>Soil Analysis Updates</span>
                <label class="toggle">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
              <div class="toggle-item">
                <span>Market Price Alerts</span>
                <label class="toggle">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>
              <div class="toggle-item">
                <span>Weekly Reports</span>
                <label class="toggle">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- Security Settings -->
        <div class="settings-section slide-in-up">
          <h3 class="section-title">
            <i class="fas fa-shield-alt"></i>
            Security Settings
          </h3>
          <form class="settings-form">
            <div class="form-group">
              <label for="current-password">Current Password</label>
              <input
                type="password"
                id="current-password"
                placeholder="Enter current password"
              />
            </div>
            <div class="form-group">
              <label for="new-password">New Password</label>
              <input
                type="password"
                id="new-password"
                placeholder="Enter new password"
              />
            </div>
            <div class="form-group">
              <label for="confirm-password">Confirm New Password</label>
              <input
                type="password"
                id="confirm-password"
                placeholder="Confirm new password"
              />
            </div>
            <div class="toggle-group">
              <div class="toggle-item">
                <span>Two-Factor Authentication</span>
                <label class="toggle">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
              <div class="toggle-item">
                <span>Login Email Notifications</span>
                <label class="toggle">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>
            </div>
            <button
              type="button"
              class="btn btn-primary"
              onclick="updatePassword()"
            >
              <i class="fas fa-lock"></i>
              Update Password
            </button>
          </form>
        </div>

        <!-- Display Preferences -->
        <div class="settings-section slide-in-up">
          <h3 class="section-title">
            <i class="fas fa-palette"></i>
            Display Preferences
          </h3>
          <div class="settings-form">
            <div class="form-group">
              <label for="theme">Theme</label>
              <select id="theme">
                <option value="light">Light Mode</option>
                <option value="dark">Dark Mode</option>
                <option value="auto">Auto (System)</option>
              </select>
            </div>
            <div class="form-group">
              <label for="language">Language</label>
              <select id="language">
                <option value="en">English</option>
                <option value="sn">Shona</option>
                <option value="nd">Ndebele</option>
              </select>
            </div>
            <div class="form-group">
              <label for="currency">Currency Display</label>
              <select id="currency">
                <option value="usd">USD ($)</option>
                <option value="zwl">ZWL (Z$)</option>
                <option value="zar">ZAR (R)</option>
              </select>
            </div>
            <div class="form-group">
              <label for="timezone">Timezone</label>
              <select id="timezone">
                <option value="Africa/Harare">Africa/Harare (CAT)</option>
                <option value="UTC">UTC</option>
                <option value="Africa/Johannesburg">
                  Africa/Johannesburg (SAST)
                </option>
              </select>
            </div>
            <div class="toggle-group">
              <div class="toggle-item">
                <span>Show Tutorial Tips</span>
                <label class="toggle">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>
              <div class="toggle-item">
                <span>Enable Animations</span>
                <label class="toggle">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- Data & Privacy -->
        <div class="settings-section slide-in-up">
          <h3 class="section-title">
            <i class="fas fa-database"></i>
            Data & Privacy
          </h3>
          <div class="settings-form">
            <div class="info-box">
              <i class="fas fa-info-circle"></i>
              <p>
                Your data is encrypted and stored securely. We comply with all
                applicable data protection regulations including GDPR and local
                privacy laws.
              </p>
            </div>
            <div class="toggle-group">
              <div class="toggle-item">
                <span>Data Analytics Participation</span>
                <label class="toggle">
                  <input type="checkbox" checked />
                  <span class="slider"></span>
                </label>
              </div>
              <div class="toggle-item">
                <span>Marketing Communications</span>
                <label class="toggle">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
              <div class="toggle-item">
                <span>Data Sharing with Partners</span>
                <label class="toggle">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>
            <div class="button-group">
              <button class="btn btn-secondary" onclick="exportData()">
                <i class="fas fa-download"></i>
                Export Data
              </button>
              <button class="btn btn-outline" onclick="requestDataDeletion()">
                <i class="fas fa-trash-alt"></i>
                Request Data Deletion
              </button>
            </div>
          </div>
        </div>

        <!-- System Information -->
        <div class="settings-section slide-in-up">
          <h3 class="section-title">
            <i class="fas fa-tools"></i>
            System Information
          </h3>
          <div class="system-info">
            <div class="info-item">
              <span class="label">Version</span>
              <span class="value">v2.1.0</span>
            </div>
            <div class="info-item">
              <span class="label">Last Updated</span>
              <span class="value">July 23, 2025</span>
            </div>
            <div class="info-item">
              <span class="label">Database Status</span>
              <span class="value status-online">Online</span>
            </div>
            <div class="info-item">
              <span class="label">API Status</span>
              <span class="value status-online">Operational</span>
            </div>
            <div class="info-item">
              <span class="label">Server Region</span>
              <span class="value">Africa South</span>
            </div>
            <div class="info-item">
              <span class="label">Last Backup</span>
              <span class="value">2 hours ago</span>
            </div>
          </div>
          <div class="button-group" style="margin-top: var(--spacing-lg)">
            <button class="btn btn-secondary" onclick="runSystemCheck()">
              <i class="fas fa-stethoscope"></i>
              Run System Check
            </button>
            <button class="btn btn-outline" onclick="clearCache()">
              <i class="fas fa-broom"></i>
              Clear Cache
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Settings Page JavaScript
      document.addEventListener("DOMContentLoaded", function () {
        initializeSettings();
        setupEventListeners();
        initializeAnimations();
      });

      function initializeSettings() {
        console.log("ðŸŒ± Talazo AgriFinance Settings Page Initialized");

        // Load saved preferences
        loadUserPreferences();

        // Set active navigation
        updateActiveNavigation();
      }

      function setupEventListeners() {
        // Sidebar toggles
        document
          .getElementById("sidebar-toggle")
          .addEventListener("click", function () {
            toggleSidebar();
          });

        document
          .getElementById("mobile-menu-toggle")
          .addEventListener("click", function () {
            toggleMobileSidebar();
          });

        document
          .getElementById("sidebar-overlay")
          .addEventListener("click", function () {
            closeMobileSidebar();
          });

        // Navigation links
        document.querySelectorAll(".nav-link").forEach((link) => {
          link.addEventListener("click", function (e) {
            // Don't prevent default for settings page
            if (this.getAttribute("href") === "/settings") {
              e.preventDefault();
            }

            // Update active state
            document.querySelectorAll(".nav-item").forEach((item) => {
              item.classList.remove("active");
            });
            this.closest(".nav-item").classList.add("active");

            // Close mobile sidebar if open
            if (window.innerWidth <= 768) {
              closeMobileSidebar();
            }
          });
        });

        // Toggle switches
        document
          .querySelectorAll('.toggle input[type="checkbox"]')
          .forEach((toggle) => {
            toggle.addEventListener("change", function () {
              const setting =
                this.closest(".toggle-item").querySelector("span").textContent;
              saveToggleSetting(setting, this.checked);
              showToast(
                `${setting} ${this.checked ? "enabled" : "disabled"}`,
                "info"
              );
            });
          });

        // Form selects
        document.querySelectorAll("select").forEach((select) => {
          select.addEventListener("change", function () {
            saveSelectSetting(this.id, this.value);
            showToast(`${this.id} updated`, "success");
          });
        });

        // Quick actions
        document.querySelectorAll(".quick-action").forEach((button) => {
          button.addEventListener("click", function () {
            const title = this.getAttribute("title");
            showToast(`${title} feature coming soon!`, "info");
          });
        });

        // Logout button
        document
          .querySelector(".logout-btn")
          .addEventListener("click", function () {
            if (confirm("Are you sure you want to logout?")) {
              showToast("Logging out...", "info");
              setTimeout(() => {
                window.location.href = "/";
              }, 1500);
            }
          });

        // Handle window resize
        window.addEventListener("resize", handleResize);
      }

      function toggleSidebar() {
        const sidebar = document.getElementById("sidebar");
        const body = document.body;

        sidebar.classList.toggle("collapsed");
        body.classList.toggle("sidebar-collapsed");

        // Store preference
        localStorage.setItem(
          "sidebarCollapsed",
          sidebar.classList.contains("collapsed")
        );
      }

      function toggleMobileSidebar() {
        const sidebar = document.getElementById("sidebar");
        const overlay = document.getElementById("sidebar-overlay");

        sidebar.classList.toggle("mobile-open");
        overlay.classList.toggle("active");
        document.body.style.overflow = sidebar.classList.contains("mobile-open")
          ? "hidden"
          : "";
      }

      function closeMobileSidebar() {
        const sidebar = document.getElementById("sidebar");
        const overlay = document.getElementById("sidebar-overlay");

        sidebar.classList.remove("mobile-open");
        overlay.classList.remove("active");
        document.body.style.overflow = "";
      }

      function handleResize() {
        const sidebar = document.getElementById("sidebar");
        const body = document.body;

        if (window.innerWidth <= 768) {
          body.classList.add("mobile");
          closeMobileSidebar();
        } else {
          body.classList.remove("mobile");
          sidebar.classList.remove("mobile-open");
          document.getElementById("sidebar-overlay").classList.remove("active");
          document.body.style.overflow = "";
        }
      }

      function initializeAnimations() {
        // Restore sidebar state
        const isCollapsed = localStorage.getItem("sidebarCollapsed") === "true";
        if (isCollapsed) {
          document.getElementById("sidebar").classList.add("collapsed");
          document.body.classList.add("sidebar-collapsed");
        }

        // Handle initial mobile state
        handleResize();

        // Add staggered animations to settings sections
        const sections = document.querySelectorAll(".settings-section");
        sections.forEach((section, index) => {
          setTimeout(() => {
            section.style.opacity = "0";
            section.style.transform = "translateY(20px)";
            section.style.transition = "all 0.6s ease-out";

            setTimeout(() => {
              section.style.opacity = "1";
              section.style.transform = "translateY(0)";
            }, 50);
          }, index * 100);
        });
      }

      function updateActiveNavigation() {
        // Set settings as active
        document.querySelectorAll(".nav-item").forEach((item) => {
          item.classList.remove("active");
        });

        const settingsNav = document
          .querySelector('a[href="/settings"]')
          .closest(".nav-item");
        if (settingsNav) {
          settingsNav.classList.add("active");
        }
      }

      function loadUserPreferences() {
        // Load saved preferences from localStorage
        const preferences = {
          theme: localStorage.getItem("theme") || "light",
          language: localStorage.getItem("language") || "en",
          currency: localStorage.getItem("currency") || "usd",
          timezone: localStorage.getItem("timezone") || "Africa/Harare",
        };

        // Apply saved preferences
        Object.keys(preferences).forEach((key) => {
          const element = document.getElementById(key);
          if (element) {
            element.value = preferences[key];
          }
        });
      }

      function saveToggleSetting(setting, value) {
        localStorage.setItem(setting.replace(/\s+/g, "_").toLowerCase(), value);
      }

      function saveSelectSetting(setting, value) {
        localStorage.setItem(setting, value);
      }

      // Settings Functions
      function updateProfile() {
        const name = document.getElementById("name").value;
        const email = document.getElementById("email").value;
        const phone = document.getElementById("phone").value;
        const department = document.getElementById("department").value;

        if (!name || !email || !phone) {
          showToast("Please fill in all required fields", "error");
          return;
        }

        // Simulate API call
        showToast("Updating profile...", "info");

        setTimeout(() => {
          // Save to localStorage (in real app, this would be API call)
          const profile = { name, email, phone, department };
          localStorage.setItem("userProfile", JSON.stringify(profile));

          // Update profile in sidebar
          document.querySelector(".profile-name").textContent = name;

          showToast("Profile updated successfully!", "success");
        }, 1500);
      }

      function updatePassword() {
        const currentPassword =
          document.getElementById("current-password").value;
        const newPassword = document.getElementById("new-password").value;
        const confirmPassword =
          document.getElementById("confirm-password").value;

        if (!currentPassword || !newPassword || !confirmPassword) {
          showToast("Please fill in all password fields", "error");
          return;
        }

        if (newPassword !== confirmPassword) {
          showToast("New passwords do not match", "error");
          return;
        }

        if (newPassword.length < 8) {
          showToast("Password must be at least 8 characters long", "error");
          return;
        }

        // Simulate API call
        showToast("Updating password...", "info");

        setTimeout(() => {
          // Clear password fields
          document.getElementById("current-password").value = "";
          document.getElementById("new-password").value = "";
          document.getElementById("confirm-password").value = "";

          showToast("Password updated successfully!", "success");
        }, 1500);
      }

      function exportData() {
        showToast("Preparing data export...", "info");

        setTimeout(() => {
          // Simulate data export
          const data = {
            profile: JSON.parse(localStorage.getItem("userProfile") || "{}"),
            preferences: {
              theme: localStorage.getItem("theme"),
              language: localStorage.getItem("language"),
              currency: localStorage.getItem("currency"),
            },
            exportDate: new Date().toISOString(),
          };

          const blob = new Blob([JSON.stringify(data, null, 2)], {
            type: "application/json",
          });
          const url = URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = url;
          a.download = "talazo_agrifinance_data_export.json";
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);

          showToast("Data exported successfully!", "success");
        }, 2000);
      }

      function requestDataDeletion() {
        if (
          confirm(
            "Are you sure you want to request data deletion? This action cannot be undone."
          )
        ) {
          showToast("Data deletion request submitted", "info");

          setTimeout(() => {
            showToast(
              "Data deletion request received. You will be contacted within 30 days.",
              "success"
            );
          }, 1500);
        }
      }

      function runSystemCheck() {
        showToast("Running system diagnostics...", "info");

        setTimeout(() => {
          showToast(
            "System check completed - All systems operational",
            "success"
          );
        }, 2000);
      }

      function clearCache() {
        if (
          confirm(
            "Are you sure you want to clear the application cache? You may need to reload the page."
          )
        ) {
          showToast("Clearing cache...", "info");

          setTimeout(() => {
            // Clear some localStorage items (keeping user preferences)
            const keysToKeep = [
              "theme",
              "language",
              "currency",
              "timezone",
              "userProfile",
              "sidebarCollapsed",
            ];
            const allKeys = Object.keys(localStorage);

            allKeys.forEach((key) => {
              if (!keysToKeep.includes(key)) {
                localStorage.removeItem(key);
              }
            });

            showToast("Cache cleared successfully!", "success");
          }, 1500);
        }
      }

      function showToast(message, type = "info") {
        const toastConfig = {
          text: message,
          duration: 3000,
          gravity: "top",
          position: "right",
          stopOnFocus: true,
          style: {
            background:
              type === "success"
                ? "#4caf50"
                : type === "error"
                ? "#f44336"
                : type === "warning"
                ? "#ff9800"
                : "#2196f3",
            borderRadius: "8px",
            fontFamily: "Inter, sans-serif",
            fontWeight: "500",
          },
        };

        if (typeof Toastify !== "undefined") {
          Toastify(toastConfig).showToast();
        } else {
          console.log(`Toast: ${message} (${type})`);
        }
      }

      // Enhanced error handling
      window.addEventListener("error", function (e) {
        console.error("Settings Error:", e.error);
        showToast("An error occurred. Please refresh the page.", "error");
      });
    </script>
  </body>
</html>
